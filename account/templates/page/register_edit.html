{% extends 'base.html' %}

{% load static %}


{% block content%}
<div class="container-xxl flex-grow-1 container-p-y">
    <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Kullanıcılar /</span><u>{{sel_item.username}}</u>  Düzenleme</h4>

    <div class="row">
        <div class="col-md-12">
          <ul class="nav nav-pills flex-column flex-md-row mb-3">
              <li class="nav-item">
              <a class="nav-link active" href="{% url 'users_home' %}"><i class="bx bx-user me-1"></i> Hesaplar</a>
              </li>
              <li class="nav-item">
              <a class="nav-link" href="{% url 'register' %}"><i class="bx bx-bell me-1"></i> Yeni Hesap</a>
              </li>
          </ul>
        <!-- Register Card -->
        <div class="card">
            <div class="card-body pt-3">
              <!-- Bordered Tabs -->
              
              <div class="tab-content pt-2">
  
        
                <div class="tab-pane fade profile-edit pt-3 active show" id="profile-edit">
                  <script type="text/javascript">
                    function previewImage(event) {
                       var input = event.target;
                       var image = document.getElementById('file-preview');
                       if (input.files && input.files[0]) {
                          var reader = new FileReader();
                          reader.onload = function(e) {
                             image.src = e.target.result;
                          }
                          reader.readAsDataURL(input.files[0]);
                       }
                    }
                    
                 </script>
                 
                 <style>
                  #file-preview {
                     width: 200px;
                     height: 200px;
                  }
                </style>
                  <!-- Profile Edit Form -->
                  <form id="formAuthentication" action="{% url 'update_user' sel_item.id %}" class="mb-3" enctype="multipart/form-data" method="POST">
                    {% csrf_token %}
                    <div class="row mb-3">
                      <label for="profileImage" class="col-md-4 col-lg-3 col-form-label"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Profil Resmi</font></font></label>
                      <div class="col-md-8 col-lg-9">
                        <img src="{{sel_item.profileimage.url}}" id="file-preview" alt="Profil" >
                        <div class="pt-2">
                          <input type="file"   name="profileimage" value="{{sel_item.profileimage.url}}" id="upload" accept="image/*" onchange="previewImage(event)" hidden/>
                          <label class="btn btn-primary btn-sm" title="Yeni profil resmi yükle" for="upload"><i class="bx bx-upload"></i></label>
                        </div>
                      </div>
                    </div>
                    
                    <div class="row mb-3">
                      <label for="fullName" class="col-md-4 col-lg-3 col-form-label"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kullanıcı  Adı</font></font></label>
                      <div class="col-md-8 col-lg-9">
                        <input type="text" value="{{sel_item.username}}" class="form-control" id="username" name="username" placeholder="Enter your username"readonly autofocus="" required>
                      </div>
                    </div>
  
                    <div class="row mb-3">
                      <label for="about" class="col-md-4 col-lg-3 col-form-label"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E Posta Adresi</font></font></label>
                      <div class="col-md-8 col-lg-9">
                        <input name="email" value="{{sel_item.email}}" type="email" class="form-control" id="exampleFormControlInput1" placeholder="name@example.com">
                      </div>
                    </div>
  
                    <div class="row mb-3">
                      <label for="company" class="col-md-4 col-lg-3 col-form-label"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adı</font></font></label>
                      <div class="col-md-8 col-lg-9">
                        <input type="text" value="{{sel_item.first_name}}" class="form-control" id="username" name="first_name" placeholder="Enter your username" autofocus="" required>
                      </div>
                    </div>
  
                    <div class="row mb-3">
                      <label for="Job" class="col-md-4 col-lg-3 col-form-label"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soyadı</font></font></label>
                      <div class="col-md-8 col-lg-9">
                        <input type="text"value="{{sel_item.last_name}}" class="form-control text-uppercase" id="username" name="last_name" placeholder="Enter your Lastname" autofocus="" required>
                      </div>
                    </div>
  
                    <div class="row mb-3">
                      <label for="Phone" class="col-md-4 col-lg-3 col-form-label"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Yetki</font></font></label>
                      <div class="col-md-8 col-lg-9">
                        <select id="sendNotification" class="form-select" name="authorization">
                            <option value="1" {% if sel_item.authorization == '1'  %}selected=""{% endif %} >YÖNETİCİ</option>
                            <option value="2" {% if sel_item.authorization == '2'  %}selected=""{% endif %}>KULLANICI</option>
                            <option value="3" {% if sel_item.authorization == '3'  %}selected=""{% endif %} >TAMİR</option>
                          </select>
                      </div>
                    </div>
  
                    <div class="row mb-3">
                      <label for="Email" class="col-md-4 col-lg-3 col-form-label"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Durum</font></font></label>
                      <div class="col-md-8 col-lg-9">
                          {% if sel_item.status == "passive" %}
                            <select id="sendNotification" class="form-select" name="status">
                              <option value="passive" selected="">Pasif</option>
                              <option value="active">Aktif</option>
                            </select>
                          {% else %}
                            <select id="sendNotification" class="form-select" name="status">
                              <option value="passive" >Pasif</option>
                              <option value="active" selected="">Aktif</option>
                            </select>
                          {% endif %}
                      </div>
                    </div>
  
                    <div class="text-center">
                      <button type="submit" class="btn btn-primary"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Düzenle</font></font></button>
                    </div>
                  </form><!-- End Profile Edit Form -->
  
                </div>
  
                
  
              </div><!-- End Bordered Tabs -->
  
            </div>
          </div>
          <!-- Register Card -->
        </div>
    </div>
  </div>
{% endblock %}
